<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Using WeeChat and weechat-android on Windows 11 | Jesse Builds Software</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script src="https://www.googletagmanager.com/gtag/js?id=UA-17968343-1" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-17968343-1');
</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "19dbe594294e444cab1e984fe13d4e7a"}'></script><meta name="generator" content="Hexo 7.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Using WeeChat and weechat-android on Windows 11</h1><a id="logo" href="/.">Jesse Builds Software</a><p class="description">Jesse's thoughts on building quality software.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Using WeeChat and weechat-android on Windows 11</h1><div class="post-meta">2024-09-05</div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Running-WeeChat-in-a-Podman-Container"><span class="toc-number">1.</span> <span class="toc-text">Running WeeChat in a Podman Container</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Why-not-use-WSL-directly"><span class="toc-number">1.1.</span> <span class="toc-text">Why not use WSL directly</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Using-WeeChat-Relay-and-a-mobile-client"><span class="toc-number">2.</span> <span class="toc-text">Using WeeChat Relay and a mobile client</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-up-WeeChat-Relay-with-TLS"><span class="toc-number">3.</span> <span class="toc-text">Setting up WeeChat Relay with TLS</span></a></li></ol></div></div><div class="post-content"><p>Internet Relay Chat (IRC) is an old text-based chat system that, while seemingly in decline, still has many users around the world. It’s not as convenient as modern alternatives, but for those of us that are familiar with it, and especially those of us that have friends there, it’s still a very viable way to communicate.</p>
<p>There are a number of IRC clients available. On windows, <a target="_blank" rel="noopener" href="https://www.mirc.com/">mIRC</a> is popular and easy to set up, but it shows its age. <a target="_blank" rel="noopener" href="https://www.irccloud.com/">IRCCloud</a> is very convenient, especially if you want to use a mobile device, but it lacks some common features, and you are limited to two servers on the free account. There are other options, of course, but they all have limitations.</p>
<p>If you like doing things the hard way, you can use <a target="_blank" rel="noopener" href="https://weechat.org/">WeeChat</a> like me. It’s powerful, has a bunch of plugins, and importantly, is still maintained. It also has a relay protocol that allows remote clients (like one on your phone) to read and respond to messages when you need to step away. It is, however, a terminal application, so it can take some getting used to.</p>
<p>WeeChat is built for Linux, but it is still very possible to run it on modern Windows. I’m confident you can get it working with the following steps.</p>
<h2 id="Running-WeeChat-in-a-Podman-Container"><a href="#Running-WeeChat-in-a-Podman-Container" class="headerlink" title="Running WeeChat in a Podman Container"></a>Running WeeChat in a Podman Container</h2><p>The best method I’ve found for running WeeChat is inside a Podman container. <a target="_blank" rel="noopener" href="https://podman.io/">Podman</a> is a container engine similar to Docker, but free on Windows. Setting it up to run WeeChat is rather easy:</p>
<ol>
<li>(Recommended, but not required): Install <a target="_blank" rel="noopener" href="https://github.com/microsoft/terminal">Windows Terminal</a>:<br><code>winget install Microsoft.WindowsTerminal</code></li>
<li>Download and install the Podman CLI from <a target="_blank" rel="noopener" href="https://github.com/containers/podman/releases">the Podman Releases page</a>. See <a target="_blank" rel="noopener" href="https://github.com/containers/podman/blob/main/docs/tutorials/podman-for-windows.md">the Podman installation instructions</a> for more info.</li>
<li>Create a directory for storing WeeChat configuration and logs. I use <code>$HOME/OneDrive/WeeChat</code> in the examples here, but you can use any location you like</li>
<li>Run the following in Windows Terminal (PowerShell). Or better yet, save it as a script somewhere in your path for easy use later: <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ((podman machine info | <span class="built_in">Out-String</span>).Contains(<span class="string">&#x27;machinestate: Stopped&#x27;</span>))</span><br><span class="line">&#123;</span><br><span class="line">    podman machine <span class="built_in">start</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">podman run <span class="literal">--rm</span> <span class="literal">-it</span> <span class="literal">--pull</span> newer <span class="literal">--env</span> <span class="string">&#x27;WEECHAT_HOME=/home/user/weechat&#x27;</span> <span class="literal">-v</span> <span class="variable">$HOME</span>/OneDrive/WeeChat:/home/user/weechat <span class="literal">--tz</span> local weechat/weechat:la<span class="built_in">test-alpine</span> weechat @args</span><br></pre></td></tr></table></figure></li>
</ol>
<p>And that’s it. You should now be running WeeChat.</p>
<p>Some notes about the startup script:</p>
<ul>
<li>The first block of the script runs the <code>podman machine start</code> command for you automatically if needed. This saves you a step the first time you run podman after each reboot of your computer</li>
<li>The container is being re-created and deleted every time it’s run (because of <code>podman run</code> and <code>--rm</code>), and new images are automatically downloaded (because of <code>--pull newer</code>). You could create a container and start it each time, but continually recreating it this way ensures that you get updates automatically when new images are published</li>
<li>the left half of <code>-v</code> specifies where data will be saved on your computer (outside the container). This is important, because everything else inside the container will be reset every time you run this script</li>
<li>The <code>--env</code> command forces WeeChat (via a supported environment variable) to write everything (configuration and logs) into a single folder inside the container which allows the file mapping with a single <code>-v</code></li>
<li>(Added 2024-10) <code>weechat @args</code> at the end of the command line allows the PowerShell script to pass arguments through to WeeChat. I have been using this to sometimes send the <code>--no-connect</code> option when I want to prevent auto-connect or auto-join.</li>
</ul>
<h3 id="Why-not-use-WSL-directly"><a href="#Why-not-use-WSL-directly" class="headerlink" title="Why not use WSL directly"></a>Why not use WSL directly</h3><p>It is absolutely possible to run WeeChat in WSL, but I prefer the Podman approach because:</p>
<ul>
<li>it’s easier to expose the WeeChat Relay port - I found it difficult to share a port for an app in WSL to my local network</li>
<li>you get updates to WeeChat automatically without running <code>apt update; apt upgrade</code></li>
<li>you are certain no state is being secretly left behind inside the WSL environment</li>
<li>you don’t have to worry about breaking WeeChat if you break WSL, and don’t lose anything if you decide to reset it</li>
<li>it uses less space. The normal Ubuntu image used by WSL is pretty big, which is wasteful if you aren’t using it for anything else</li>
</ul>
<h2 id="Using-WeeChat-Relay-and-a-mobile-client"><a href="#Using-WeeChat-Relay-and-a-mobile-client" class="headerlink" title="Using WeeChat Relay and a mobile client"></a>Using WeeChat Relay and a mobile client</h2><p>One of the main reasons I went with WeeChat was the WeeChat Relay protocol and clients like <a target="_blank" rel="noopener" href="https://github.com/ubergeek42/weechat-android">weechat-android</a>. This allows you to keep WeeChat running on your main computer, but access it remotely to check for or respond to messages. I find this handy when I need to do a chore or take a break. Because IRC depends on persistent connections, it is hard to use it (reliably) on a mobile device directly. And because WeeChat is exposing the relay, people don’t even know that you’re switching devices.</p>
<p>You can set up the relay service with the following steps. There are also <a target="_blank" rel="noopener" href="https://weechat.org/files/doc/weechat/stable/weechat_user.en.html#relay">detailed instructions in the documentation</a> if you have specific questions.</p>
<ol>
<li>Make up a password</li>
<li>Use the following commands in WeeChat to store the password, and use it for your relay server:<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/secure set relay new_password</span><br><span class="line">/set relay.network.password &quot;$&#123;sec.data.relay&#125;&quot;</span><br></pre></td></tr></table></figure></li>
<li>Use the following command in WeeChat to enable WeeChat Relay:<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/relay add weechat 9500</span><br></pre></td></tr></table></figure></li>
<li>Run the following in PowerShell (as Administrator) to allow WeeChat Relay through the Windows firewall, and to proxy any traffic from the local network to the relay in the container:<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">New-NetFirewallRule</span> <span class="literal">-DisplayName</span> <span class="string">&quot;WeeChat Relay&quot;</span> <span class="literal">-Direction</span> Inbound <span class="literal">-Protocol</span> TCP <span class="literal">-LocalPort</span> <span class="number">9500</span> <span class="literal">-Action</span> Allow</span><br><span class="line"></span><br><span class="line">netsh interface portproxy <span class="built_in">set</span> v4tov4 listenport=<span class="number">9500</span> listenaddress=<span class="number">0.0</span>.<span class="number">0.0</span> connectport=<span class="number">9500</span> connectaddress=<span class="number">127.0</span>.<span class="number">0.1</span></span><br></pre></td></tr></table></figure></li>
<li>Add the following to the <code>podman run</code> command to expose the relay port from the container: <code>-p 9500:9500</code>. The complete command will now be:<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">podman run <span class="literal">--rm</span> <span class="literal">-it</span> <span class="literal">--pull</span> newer <span class="literal">--env</span> <span class="string">&#x27;WEECHAT_HOME=/home/user/weechat&#x27;</span> <span class="literal">-v</span> <span class="variable">$HOME</span>/OneDrive/WeeChat:/home/user/weechat <span class="literal">--tz</span> local <span class="literal">-p</span> <span class="number">9500</span>:<span class="number">9500</span> weechat/weechat:la<span class="built_in">test-alpine</span> weechat @args</span><br></pre></td></tr></table></figure></li>
<li>Install <a target="_blank" rel="noopener" href="https://play.google.com/store/apps/details?id=com.ubergeek42.WeechatAndroid.dev">weechat-android</a> on your Android device. I haven’t found an iOS equivalent. If you have one you’d recommend, please post it in the comments.</li>
<li>Configure your client. You can use the following settings in weechat-android:<ul>
<li>Connect type: Plain Connection</li>
<li>Relay host: IP address of the computer running WeeChat (inside your network)</li>
<li>Relay port: 9500</li>
<li>Relay password: The password you created earlier</li>
</ul>
</li>
</ol>
<p>As long as WeeChat is running on your computer, and the client is connected to the same network, you should now be able to connect to the relay.</p>
<p>If you want to access WeeChat relay from outside your home, you’ll have to set up some sort of vpn to your home network. I do not suggest opening this port to the internet directly without setting up TLS encryption first.</p>
<h2 id="Setting-up-WeeChat-Relay-with-TLS"><a href="#Setting-up-WeeChat-Relay-with-TLS" class="headerlink" title="Setting up WeeChat Relay with TLS"></a>Setting up WeeChat Relay with TLS</h2><p>WeeChat supports TLS for the relay protocol, which makes it much safer for connections going over the internet. However, it requires a DNS record that points to your WeeChat instance, and a self-signed certificate that matches the name. This appears to be a security limitation in Android itself, so you’ll have to deal with it if you want TLS.</p>
<p>For my own purposes, I stuck an A record in one of my domains that points to the local fixed IP address of my main computer. If you’re also using the relay protocol over your home network, you could use a dynamic DNS service like <a target="_blank" rel="noopener" href="https://www.duckdns.org/">Duck DNS</a> that allows you to specify the IP address manually. Dynamic DNS will also be helpful if you are opening the port to the internet from your router.</p>
<p>Once you have DNS figured out, generating a self-signed certificate can be done relatively easily.</p>
<ol>
<li>Run the following in PowerShell to start an interactive shell in a temporary container:<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">podman run <span class="literal">--rm</span> <span class="literal">-it</span> <span class="literal">-v</span> <span class="variable">$HOME</span>/OneDrive/WeeChat:/weechat <span class="literal">--entrypoint</span> sh alpine/openssl</span><br></pre></td></tr></table></figure>
<ul>
<li>Note: Make sure the directory mapping (on the left) matches the location on your host machine where you store your WeeChat data.</li>
</ul>
</li>
<li>Run the following with the DNS name you set up:<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HOSTNAME=yourweechatrelay.duckdns.org</span><br></pre></td></tr></table></figure></li>
<li>Run the following to generate a self-signed certificate in the WeeChat directory:<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p weechat/tls</span><br><span class="line">openssl req -x509 -newkey rsa:4096 -nodes \</span><br><span class="line">    -keyout weechat/tls/relay.pem -out weechat/tls/relay.pem \</span><br><span class="line">    -days 3650 -subj <span class="string">&quot;/CN=<span class="variable">$HOSTNAME</span>&quot;</span> -addext <span class="string">&quot;subjectAltName=DNS:<span class="variable">$HOSTNAME</span>&quot;</span></span><br></pre></td></tr></table></figure></li>
<li>Run <code>exit</code> to stop the container</li>
<li>Run the following in WeeChat to replace the relay server with a TLS-enabled relay server<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/relay del weechat</span><br><span class="line">/set relay.network.tls_cert_key &quot;$&#123;weechat_config_dir&#125;/tls/relay.pem&quot;</span><br><span class="line">/relay add ssl.weechat 9500</span><br></pre></td></tr></table></figure></li>
</ol>
<p>From weechat-android, you can change the Connect type to “WeeChat SSL”. The next time you connect, you’ll be asked to verify the certificate. After this all communication between WeeChat and your client should be encrypted.</p>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/howto/" rel="tag">howto</a></li></ul></div><div class="post-nav"><a class="pre" href="/2024/10/Exporting-to-Google-Sheets-API-from-CSharp/">Exporting to Google Sheets API from C#</a><a class="next" href="/2024/08/Rocketbook-vs-Whiteboard/">Rocketbook vs Whiteboard</a></div><script src="https://utteranc.es/client.js" repo="jessemcdowell/jessemcdowell-blog-comments" issue-term="title" theme="github-light" crossorigin="anonymous" async></script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://jessemcdowell.ca"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://pragmaticpotato.com/" title="Pragmatic Potato Software" target="_blank">Pragmatic Potato Software</a><ul></ul><a href="/resources/" title="Resources" target="_blank">Resources</a><ul></ul><a href="/mysterysolver/" title="Mystery Solver" target="_blank">Mystery Solver</a><ul></ul><a href="/licence/" title="Licence" target="_blank">Licence</a></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/sql/" style="font-size: 15px;">sql</a> <a href="/tags/devops/" style="font-size: 15px;">devops</a> <a href="/tags/blogging/" style="font-size: 15px;">blogging</a> <a href="/tags/open-source/" style="font-size: 15px;">open source</a> <a href="/tags/gadgets/" style="font-size: 15px;">gadgets</a> <a href="/tags/design/" style="font-size: 15px;">design</a> <a href="/tags/ioc/" style="font-size: 15px;">ioc</a> <a href="/tags/unit-testing/" style="font-size: 15px;">unit testing</a> <a href="/tags/database/" style="font-size: 15px;">database</a> <a href="/tags/entity-framework/" style="font-size: 15px;">entity framework</a> <a href="/tags/net/" style="font-size: 15px;">.net</a> <a href="/tags/debugging/" style="font-size: 15px;">debugging</a> <a href="/tags/people-management/" style="font-size: 15px;">people management</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/food/" style="font-size: 15px;">food</a> <a href="/tags/leadership/" style="font-size: 15px;">leadership</a> <a href="/tags/career/" style="font-size: 15px;">career</a> <a href="/tags/consulting/" style="font-size: 15px;">consulting</a> <a href="/tags/c/" style="font-size: 15px;">c#</a> <a href="/tags/interviewing/" style="font-size: 15px;">interviewing</a> <a href="/tags/performance/" style="font-size: 15px;">performance</a> <a href="/tags/project-management/" style="font-size: 15px;">project management</a> <a href="/tags/learning/" style="font-size: 15px;">learning</a> <a href="/tags/practices/" style="font-size: 15px;">practices</a> <a href="/tags/tea/" style="font-size: 15px;">tea</a> <a href="/tags/angular/" style="font-size: 15px;">angular</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/quality/" style="font-size: 15px;">quality</a> <a href="/tags/recipes/" style="font-size: 15px;">recipes</a> <a href="/tags/bugs/" style="font-size: 15px;">bugs</a> <a href="/tags/war-stories/" style="font-size: 15px;">war stories</a> <a href="/tags/video-games/" style="font-size: 15px;">video games</a> <a href="/tags/community/" style="font-size: 15px;">community</a> <a href="/tags/kubernetes/" style="font-size: 15px;">kubernetes</a> <a href="/tags/argocd/" style="font-size: 15px;">argocd</a> <a href="/tags/architecture/" style="font-size: 15px;">architecture</a> <a href="/tags/resources/" style="font-size: 15px;">resources</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/reviews/" style="font-size: 15px;">reviews</a> <a href="/tags/pragmatic-potato/" style="font-size: 15px;">pragmatic potato</a> <a href="/tags/howto/" style="font-size: 15px;">howto</a> <a href="/tags/code-reviews/" style="font-size: 15px;">code reviews</a> <a href="/tags/household-organization/" style="font-size: 15px;">household organization</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/typescript/" style="font-size: 15px;">typescript</a> <a href="/tags/architectural-decision/" style="font-size: 15px;">architectural decision</a> <a href="/tags/powershell/" style="font-size: 15px;">powershell</a></div></div><div class="widget"><div class="widget-title">Subscribe</div><ul></ul><i class="fa fa-rss"></i><a href="/atom.xml" title="Atom" target="_blank"> Atom</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">Jesse Builds Software.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>