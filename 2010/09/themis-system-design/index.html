<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Themis: System Design | Jesse Builds Software</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script src="https://www.googletagmanager.com/gtag/js?id=UA-17968343-1" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-17968343-1');
</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Themis: System Design</h1><a id="logo" href="/.">Jesse Builds Software</a><p class="description">Jesse's thoughts on building quality software.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Themis: System Design</h1><div class="post-meta">2010-09-14<span> | </span><span class="category"><a href="/categories/projects/">projects</a><a href="/categories/projects/Themis/">Themis</a></span></div><div class="post-content"><p>I’m charging forward on the Shared Resource Schedule Service. There are a lot of things I’m getting into place before I start writing code. Don’t try to tell me that I’m not being agile either, you always need to design a little to write good code. The key to being agile is designing only as much as you need, and being prepared to change your mind later.</p>
<h1 id="The-Name"><a href="#The-Name" class="headerlink" title="The Name"></a>The Name</h1><p>The first order of business was to choose a name. It helps to know the name before you create a project. I’m also hoping to put the source in a public repository right away so that I can talk about the coding process while I build it.</p>
<p>Themis comes from Greek mythology. <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Themis">According toWikipedia</a>, she “is the embodiment of divine order, law, and custom.” That seems somewhat applicable to the subject at hand. I know thatGreek mythology isn’t too creative, but we can always change the name later if anyone has a better idea.</p>
<h1 id="Application-Structure"><a href="#Application-Structure" class="headerlink" title="Application Structure"></a>Application Structure</h1><img src="/2010/09/themis-system-design/Themis-Application-Architecture.jpg" class="" title="A diagram showing the two main applications and the database that they both reference.">

<p>This system should be very simple. It’ll have a windows service to check for invitation emails, a web page to view schedules and configure the service, and a database to hold all the information so that both apps can access it. For simplicity, I want to put most of the code into a single assembly.I want to the web UI and the service runner to be a thin veneer over the main assembly.</p>
<h1 id="Application-Design"><a href="#Application-Design" class="headerlink" title="Application Design"></a>Application Design</h1><p>Although this is just a home project I do want it to be good quality, even if my name weren’t going to be pasted into every source file with the license. To achieve this, I will be using unit tests in as many areas as I can add them; not only to catch my mistakes but to help others understand and maintain the system after I’m gone. To make unit testing easier, I want to use an<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Dependency_injection">IoC &#x2F; DI</a>coding style.</p>
<p>I’m going to use Entity Framework to keep the application code ignorant about the database. I don’t want to be tied to a particular database system, though I suspect most installations would use a sqlce database. I could use any ORM, but I’ve been wanting to try EF.</p>
<h1 id="Processing-Mail"><a href="#Processing-Mail" class="headerlink" title="Processing Mail"></a>Processing Mail</h1><p>Now that enough of the design (and some of the non-coding elements) have been straightened out, I can start to really focus on the first part of the project:Processing email.</p>
<img src="/2010/09/themis-system-design/Themis-Mail-Processing.jpg" class="" title="A sequence diagram showing the mail processing sequence.">

<p>I want to build the email handling logic as a group of small components,each responsible for a single aspect of the process. Aside from some shared types to hold email or request data, and the controller that knows how to orchestrate them, none of the components will know anything about each other. Even then the controller won’t know which types contain the actual implementation thanks to the IoC container.</p>
<p>By building each part in isolation I get a few good advantages. First, I’m able to test each component completely and separately from the rest of the system. Second, it becomes possible to replace any part of the chain with nothing more than a configuration change, which will be especially handy if anyone wants to fork the code. Third, I can reuse the individual components for other parts of the system, and they are likely to require less refactoring before they can be reused.</p>
<p>This is the new coding style: you build a system with complimentary building blocks loosely hooked together. You end up with a lot of classes, but you avoid the pain of complex inheritance trees.</p>
<h1 id="The-Next-Step"><a href="#The-Next-Step" class="headerlink" title="The Next Step"></a>The Next Step</h1><p>Now that I’ve figured out my approach, I see that my first step is too big for an afternoon. Instead, I’m going to tackle it in three smaller steps:</p>
<ol>
<li>Receive any email and send a simple response back.</li>
<li>Receive event invitations by email and send a human-readable response listing the details of the invitation.</li>
<li>Receive event invitations by email and send an acceptance email. (The original requirement.)</li>
</ol>
<p>All I have left is to make a good cup of tea, turn up the music,and bang some keys.</p>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/design/" rel="tag">design</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ioc/" rel="tag">ioc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/unit-testing/" rel="tag">unit testing</a></li></ul></div><div class="post-nav"><a class="pre" href="/2010/09/ie9-try-and-fail/">IE9 Try and Fail</a><a class="next" href="/2010/09/my-first-open-source-project/">My First Open Source Project</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://jessemcdowell.ca"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="/mysterysolver/" title="Mystery Solver" target="_blank">Mystery Solver</a><ul></ul><a href="/license/" title="License" target="_blank">License</a></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Net/" style="font-size: 16px;">.Net</a> <a href="/tags/angular/" style="font-size: 12px;">angular</a> <a href="/tags/blogging/" style="font-size: 13.33px;">blogging</a> <a href="/tags/bugs/" style="font-size: 14.67px;">bugs</a> <a href="/tags/c/" style="font-size: 12px;">c#</a> <a href="/tags/career/" style="font-size: 17.33px;">career</a> <a href="/tags/consulting/" style="font-size: 12px;">consulting</a> <a href="/tags/database/" style="font-size: 14.67px;">database</a> <a href="/tags/debugging/" style="font-size: 20px;">debugging</a> <a href="/tags/design/" style="font-size: 16px;">design</a> <a href="/tags/devops/" style="font-size: 18.67px;">devops</a> <a href="/tags/entity-framework/" style="font-size: 13.33px;">entity framework</a> <a href="/tags/food/" style="font-size: 13.33px;">food</a> <a href="/tags/gadgets/" style="font-size: 12px;">gadgets</a> <a href="/tags/interviewing/" style="font-size: 12px;">interviewing</a> <a href="/tags/ioc/" style="font-size: 12px;">ioc</a> <a href="/tags/js/" style="font-size: 12px;">js</a> <a href="/tags/leadership/" style="font-size: 14.67px;">leadership</a> <a href="/tags/learning/" style="font-size: 12px;">learning</a> <a href="/tags/open-source/" style="font-size: 12px;">open source</a> <a href="/tags/people-management/" style="font-size: 14.67px;">people management</a> <a href="/tags/performance/" style="font-size: 13.33px;">performance</a> <a href="/tags/project-management/" style="font-size: 12px;">project management</a> <a href="/tags/recipes/" style="font-size: 12px;">recipes</a> <a href="/tags/sql/" style="font-size: 12px;">sql</a> <a href="/tags/tea/" style="font-size: 13.33px;">tea</a> <a href="/tags/unit-testing/" style="font-size: 12px;">unit testing</a> <a href="/tags/video-games/" style="font-size: 12px;">video games</a> <a href="/tags/war-stories/" style="font-size: 12px;">war stories</a> <a href="/tags/web/" style="font-size: 13.33px;">web</a></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2023 <a href="/." rel="nofollow">Jesse Builds Software.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>