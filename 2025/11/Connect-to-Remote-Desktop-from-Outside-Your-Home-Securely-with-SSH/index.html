<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>Connect to Remote Desktop from Outside Your Home Securely with SSH | Jesse Builds Software</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script src="https://www.googletagmanager.com/gtag/js?id=UA-17968343-1" async></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-17968343-1');
</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "19dbe594294e444cab1e984fe13d4e7a"}'></script><meta name="generator" content="Hexo 7.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Connect to Remote Desktop from Outside Your Home Securely with SSH</h1><a id="logo" href="/.">Jesse Builds Software</a><p class="description">Jesse's thoughts on building quality software.</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/about/"><i class="fa fa-user"> About</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Connect to Remote Desktop from Outside Your Home Securely with SSH</h1><div class="post-meta">2025-11-02</div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Quick-version"><span class="toc-number">1.</span> <span class="toc-text">Quick version</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-it-works"><span class="toc-number">2.</span> <span class="toc-text">How it works</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Setting-up-SSH"><span class="toc-number">3.</span> <span class="toc-text">Setting up SSH</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Creating-a-certificate-and-adding-it-to-a-user"><span class="toc-number">4.</span> <span class="toc-text">Creating a certificate and adding it to a user</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Exposing-SSH-to-the-Internet"><span class="toc-number">5.</span> <span class="toc-text">Exposing SSH to the Internet</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set-up-dynamic-DNS-for-your-router"><span class="toc-number">6.</span> <span class="toc-text">Set up dynamic DNS for your router</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Connecting-to-SSH"><span class="toc-number">7.</span> <span class="toc-text">Connecting to SSH</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Enable-RDP-on-your-workstation"><span class="toc-number">8.</span> <span class="toc-text">Enable RDP on your workstation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Connecting-RDP-to-localhost"><span class="toc-number">9.</span> <span class="toc-text">Connecting RDP to localhost</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Putting-it-all-together"><span class="toc-number">10.</span> <span class="toc-text">Putting it all together</span></a></li></ol></div></div><div class="post-content"><p>I have a Windows workstation sitting under my desk at home. This is where I do all of my professional development. I like this setup because it keeps my work completely separate from my personal stuff. If I’m honest, though, my main reason for buying it was because I poured a glass of water over my development laptop. But now that I have it, I highly recommend it.</p>
<p>When I’m working at home, I connect to this workstation using Remote Desktop (RDP). It’s a fantastic protocol for accessing a Windows machine across a network. It’s built in to the operating system, and it’s generally pretty smooth. Most times I can’t even tell that I’m using it.</p>
<p>When I’m working remotely, however, accessing that workstation under the desk is a lot harder.</p>
<p>You could share the RDP port on the workstation through your router, but I don’t recommend this. Windows isn’t really hardened to be on the open internet. I suggest instead exposing an SSH server, authenticating with a certificate (and not allowing any other methods), and using that to tunnel RDP through to your Windows workstation nestled safely within your firewall.</p>
<p>In this post I’ll walk you through setting that up.</p>
<h2 id="Quick-version"><a href="#Quick-version" class="headerlink" title="Quick version"></a>Quick version</h2><p>You can use this command to set up the SSH connection with RDP being routed through it:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user@fully_qualified_ddns_name -p ssh_port -i ~/.ssh/home_server -L 127.0.0.2:3389:windows_private_ip:3389</span><br></pre></td></tr></table></figure>

<p>Substitute the values:</p>
<ul>
<li><code>user</code> - your username on your home server (where SSH is running)</li>
<li><code>fully_qualified_ddns_name</code> - the full ddns name of yours router (ex: <code>myhome.duckdns.org</code>)</li>
<li><code>ssh_port</code> - the public port you use to expose SSH to the internet (ex: 2299)</li>
<li><code>home_server</code> - the certificate file you set up for SSH authentication</li>
<li><code>windows_private_ip</code> - the private network ip (from the point of view of your home server) of the Windows workstation you want to connect to</li>
</ul>
<p>Once the connection is established, open the standard Remote Desktop client, and connect to: <code>127.0.0.2</code>. Then log in to the workstation with your normal credentials.</p>
<h2 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works"></a>How it works</h2><img src="/2025/11/Connect-to-Remote-Desktop-from-Outside-Your-Home-Securely-with-SSH/ssh_tunnel.svg" class="" title="A diagram showing RDP being tunneled via SSH through to the workstation behind the router.">


<h2 id="Setting-up-SSH"><a href="#Setting-up-SSH" class="headerlink" title="Setting up SSH"></a>Setting up SSH</h2><p>I’m running sshd (the service that hosts SSH) on a little home server I use to run a number of services in my home. I’m using Debian, so I was able to install sshd easily using the built-in package manager. There are SSH servers for all the platforms, so you don’t need to use Debian if you don’t want to.</p>
<p>If you do use Debian however, this is how I’ve got mine configured:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd server-access</span><br><span class="line"></span><br><span class="line">CURRENT_USER=$(<span class="built_in">whoami</span>)</span><br><span class="line">sudo usermod -aG server-access <span class="string">&quot;<span class="variable">$CURRENT_USER</span>&quot;</span></span><br><span class="line"></span><br><span class="line">sudo <span class="built_in">echo</span> <span class="string">&#x27;</span></span><br><span class="line"><span class="string">PermitRootLogin no</span></span><br><span class="line"><span class="string">PubkeyAuthentication yes</span></span><br><span class="line"><span class="string">PasswordAuthentication no</span></span><br><span class="line"><span class="string">PermitEmptyPasswords no</span></span><br><span class="line"><span class="string">MaxAuthTries 4</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">AllowGroups server-access</span></span><br><span class="line"><span class="string">&#x27;</span> &gt; /etc/ssh/sshd_config.d/secure.conf</span><br><span class="line"></span><br><span class="line">sudo service ssh restart</span><br></pre></td></tr></table></figure>

<p>This creates a group called <code>server-access</code>, and adds the current user to it. Later on, we’re allowing anyone in this group to access the sshd server. We are also requiring all users to authenticate with a certificate. You can add as many users to this group as you’d like.</p>
<h2 id="Creating-a-certificate-and-adding-it-to-a-user"><a href="#Creating-a-certificate-and-adding-it-to-a-user" class="headerlink" title="Creating a certificate and adding it to a user"></a>Creating a certificate and adding it to a user</h2><p>Run this command to generate a certificate on the computer you’re connecting from. Note that it should work in both Linux and modern versions of Windows. Probably on Macs too, but I haven’t tried.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -f ~/.ssh/home_server</span><br></pre></td></tr></table></figure>

<p>You can use any filename you like for the certificate, but remember what you choose because you’ll need it later. If you like, you can also add a comment inside the file with <code>-C &quot;home server&quot;</code>. This can help keep them straight if you have multiple certificates.</p>
<p>This command generates two files: the private key (the name you chose), and the public key (the name you chose with <code>.pub</code> added to the end). Open the public key file and copy its contents. You can use <code>cat ~/.ssh/home_server.pub</code> to read the file in a console.</p>
<p>If you’re using a Debian machine for your Home Server, you can find (or create) a file at <code>~/.ssh/authorized_keys</code>, and paste the whole contents of the <code>.pub</code> file as a new line. If you’re setting this up for multiple users, make sure to create one of these files for each home directory. I suggest different keys for each user.</p>
<p>If you have multiple computers to connecting to your home network all for the same user, I also suggest using a different key pair for each connecting computer. This way, if one of your computers is lost or stolen, you can delete its key while continuing to use the others. If you’re doing this, I also suggest adding comments to the end of public keys in the <code>authorized_keys</code> file so you can tell them all apart.</p>
<p>Now you can test your SSH authentication. Running this inside your home network is fine.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user@home_server_ip -i ~/.ssh/home_server</span><br></pre></td></tr></table></figure>

<p>If it works, you should be logged in to the home server.</p>
<h2 id="Exposing-SSH-to-the-Internet"><a href="#Exposing-SSH-to-the-Internet" class="headerlink" title="Exposing SSH to the Internet"></a>Exposing SSH to the Internet</h2><p>You have to set up port forwarding on your router&#x2F;firewall to allow SSH on your home server to be accessible from outside your home. Look to the documentation for your particular router if you need help with this.</p>
<p>The default port for SSH is 22. You should be forwarding to port 22 at the local ip address of your home server. I don’t recommend, however, using port 22 as the public port on the outside of your router. There are a lot of robots crawling every IP address on the internet. Since port 22 is a commonly used port, it could be a target for automated attacks.</p>
<p>It’s ideal to choose a port about 2000 as this is well past the range of the most commonly used protocols on the internet. You can refer to a listing of commonly used port numbers (such as <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers">https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers</a>) to make extra sure it’s not something standard.</p>
<h2 id="Set-up-dynamic-DNS-for-your-router"><a href="#Set-up-dynamic-DNS-for-your-router" class="headerlink" title="Set up dynamic DNS for your router"></a>Set up dynamic DNS for your router</h2><p>Depending on your Internet Provider (ISP), your home network may get an IP address that never changes, or you might have one that changes every day. Even if it happens infrequently, Dynamic DNS can make connecting to your home environment a lot simpler.</p>
<p>Many consumer routers have a Dynamic DNS (DDNS) option built in. If your router does, this will likely be the easiest method. If not, you can set up up a service like <a target="_blank" rel="noopener" href="https://github.com/qdm12/ddns-updater">ddns-updater</a> on your home server. I personally run it inside a Podman container.</p>
<p>Once this is working, you’ll now have a convenient name to reach your home network instead of needing to look up its public ip every time you want to connect.</p>
<h2 id="Connecting-to-SSH"><a href="#Connecting-to-SSH" class="headerlink" title="Connecting to SSH"></a>Connecting to SSH</h2><p>With all of the above configured, you should now be able to connect to SSH from outside your network. Depending on your router, you may not be able to test this from inside your home network.</p>
<p>When I want to test external connections, I enable hotspot mode on my phone and connect the client computer I’m using to its wifi. If you don’t want to do this, it could also be a good excuse to visit your local coffee shop.</p>
<p>You can use this command to connect to the SSH server:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh user@external_ip_address -p ssh_port -i ~/.ssh/home_server</span><br></pre></td></tr></table></figure>

<h2 id="Enable-RDP-on-your-workstation"><a href="#Enable-RDP-on-your-workstation" class="headerlink" title="Enable RDP on your workstation"></a>Enable RDP on your workstation</h2><p>You need to enable Remote Desktop on the Windows workstation before you can use it. If you haven’t done this already, open Settings and search for Remote Desktop.</p>
<p>You’ll also need to know your username and password to log into Windows.</p>
<h2 id="Connecting-RDP-to-localhost"><a href="#Connecting-RDP-to-localhost" class="headerlink" title="Connecting RDP to localhost"></a>Connecting RDP to localhost</h2><p>If your client computer happens to be a Windows computer, you have to use a trick to get around a weird limitation in the Microsoft Remote Desktop Client.</p>
<p>If you try to connect it to 127.0.0.1, you get this error:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Your computer could not connect to another console session on the remote computer because you already have a console session in progress.</span><br></pre></td></tr></table></figure>

<p>Unfortunately, you really want to open sharing on localhost (as opposed to the wifi ip) so that only RDP connections from on your computer will be able to reach the SSH tunnel. This is especially important when using public networks like a coffee shop wifi.</p>
<p>One little-known trick is that all the IP addresses in the <code>127.0.0.1/8</code> block (anything starting with <code>127.</code>) are all valid localhost IP addresses. The check in the Microsoft RDP client only looks for <code>127.0.0.1</code>, so you can use <code>127.0.0.2</code> and get around it.</p>
<p>To forward the port through the SSH connection, you add this to the SSH command: <code>-L 127.0.0.2:3389:windows_private_ip:3389</code></p>
<p>The first 3389 is the port that’s opened up on your local computer. You don’t have to use 3389 here, but it’s convenient. If you had multiple workstations inside your home network you can add <code>-L</code> multiple times with a different local port for each one.</p>
<p>The second 3389 is the port on the computer you’re connecting to. This will pretty much always be 3389, so don’t try to change it.</p>
<h2 id="Putting-it-all-together"><a href="#Putting-it-all-together" class="headerlink" title="Putting it all together"></a>Putting it all together</h2><p>Refer to <a href="#Quick-version">Quick version</a> near the top of this post for all the steps together.</p>
<p>With everything set up, you should now be able to work remotely with ease and peace of mind. Maybe it’s time to finally do some real work on your laptop from that coffee shop?</p>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/devops/" rel="tag">devops</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/howto/" rel="tag">howto</a></li></ul></div><div class="post-nav"><a class="next" href="/2025/10/Every-Drink-on-the-Phillips-LatteGo-5500/">Every Drink on the Phillips LatteGo 5500</a></div><script src="https://utteranc.es/client.js" repo="jessemcdowell/jessemcdowell-blog-comments" issue-term="title" theme="github-light" crossorigin="anonymous" async></script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://jessemcdowell.ca"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="https://pragmaticpotato.com/" title="Pragmatic Potato Software" target="_blank">Pragmatic Potato Software</a><ul></ul><a href="/resources/" title="Resources" target="_blank">Resources</a><ul></ul><a href="/mysterysolver/" title="Mystery Solver" target="_blank">Mystery Solver</a><ul></ul><a href="/licence/" title="Licence" target="_blank">Licence</a></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/blogging/" style="font-size: 15px;">blogging</a> <a href="/tags/design/" style="font-size: 15px;">design</a> <a href="/tags/sql/" style="font-size: 15px;">sql</a> <a href="/tags/devops/" style="font-size: 15px;">devops</a> <a href="/tags/open-source/" style="font-size: 15px;">open source</a> <a href="/tags/gadgets/" style="font-size: 15px;">gadgets</a> <a href="/tags/ioc/" style="font-size: 15px;">ioc</a> <a href="/tags/unit-testing/" style="font-size: 15px;">unit testing</a> <a href="/tags/database/" style="font-size: 15px;">database</a> <a href="/tags/entity-framework/" style="font-size: 15px;">entity framework</a> <a href="/tags/net/" style="font-size: 15px;">.net</a> <a href="/tags/debugging/" style="font-size: 15px;">debugging</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/people-management/" style="font-size: 15px;">people management</a> <a href="/tags/food/" style="font-size: 15px;">food</a> <a href="/tags/leadership/" style="font-size: 15px;">leadership</a> <a href="/tags/career/" style="font-size: 15px;">career</a> <a href="/tags/consulting/" style="font-size: 15px;">consulting</a> <a href="/tags/c/" style="font-size: 15px;">c#</a> <a href="/tags/interviewing/" style="font-size: 15px;">interviewing</a> <a href="/tags/project-management/" style="font-size: 15px;">project management</a> <a href="/tags/performance/" style="font-size: 15px;">performance</a> <a href="/tags/learning/" style="font-size: 15px;">learning</a> <a href="/tags/practices/" style="font-size: 15px;">practices</a> <a href="/tags/angular/" style="font-size: 15px;">angular</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/tea/" style="font-size: 15px;">tea</a> <a href="/tags/quality/" style="font-size: 15px;">quality</a> <a href="/tags/recipes/" style="font-size: 15px;">recipes</a> <a href="/tags/bugs/" style="font-size: 15px;">bugs</a> <a href="/tags/war-stories/" style="font-size: 15px;">war stories</a> <a href="/tags/video-games/" style="font-size: 15px;">video games</a> <a href="/tags/community/" style="font-size: 15px;">community</a> <a href="/tags/kubernetes/" style="font-size: 15px;">kubernetes</a> <a href="/tags/argocd/" style="font-size: 15px;">argocd</a> <a href="/tags/architecture/" style="font-size: 15px;">architecture</a> <a href="/tags/resources/" style="font-size: 15px;">resources</a> <a href="/tags/reviews/" style="font-size: 15px;">reviews</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/code-reviews/" style="font-size: 15px;">code reviews</a> <a href="/tags/pragmatic-potato/" style="font-size: 15px;">pragmatic potato</a> <a href="/tags/howto/" style="font-size: 15px;">howto</a> <a href="/tags/household-organization/" style="font-size: 15px;">household organization</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/typescript/" style="font-size: 15px;">typescript</a> <a href="/tags/powershell/" style="font-size: 15px;">powershell</a> <a href="/tags/japanese/" style="font-size: 15px;">japanese</a> <a href="/tags/architectural-decision/" style="font-size: 15px;">architectural decision</a> <a href="/tags/home-assistant/" style="font-size: 15px;">home assistant</a> <a href="/tags/home-automation/" style="font-size: 15px;">home automation</a> <a href="/tags/coffee/" style="font-size: 15px;">coffee</a> <a href="/tags/parenting/" style="font-size: 15px;">parenting</a></div></div><div class="widget"><div class="widget-title">Subscribe</div><ul></ul><i class="fa fa-rss"></i><a href="/atom.xml" title="Atom" target="_blank"> Atom</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">Jesse Builds Software.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>